diff -uNr bridge.org/brctl/Makefile bridge/brctl/Makefile
--- bridge.org/brctl/Makefile	Wed Apr  5 00:14:36 2000
+++ bridge/brctl/Makefile	Thu Sep 21 15:08:50 2000
@@ -1,10 +1,10 @@
 all:			brctl brctld
 
 brctl:			brctl.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
-			gcc -Wall -g -o brctl brctl.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
+			gcc -Wall $(OPT) -g -o brctl brctl.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
 
 brctld:			brctld.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
-			gcc -Wall -g -o brctld brctld.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
+			gcc -Wall $(OPT) -g -o brctld brctld.o brctl_cmd.o brctl_disp.o ../libbridge/libbridge.a
 
 clean:
 			rcsclean *
@@ -15,13 +15,13 @@
 			rm -f core
 
 brctl.o:		brctl.c brctl.h
-			gcc -I../libbridge -Wall -c -g -o brctl.o brctl.c
+			gcc -I../libbridge -Wall -c $(OPT) -o brctl.o brctl.c
 
 brctld.o:		brctld.c brctl.h
-			gcc -I../libbridge -Wall -c -g -o brctld.o brctld.c
+			gcc -I../libbridge -Wall -c $(OPT) -o brctld.o brctld.c
 
 brctl_cmd.o:		brctl_cmd.c brctl.h
-			gcc -I../libbridge -Wall -c -g -o brctl_cmd.o brctl_cmd.c
+			gcc -I../libbridge -Wall -c $(OPT) -o brctl_cmd.o brctl_cmd.c
 
 brctl_disp.o:		brctl_disp.c brctl.h
-			gcc -I../libbridge -Wall -c -g -o brctl_disp.o brctl_disp.c
+			gcc -I../libbridge -Wall -c $(OPT) -o brctl_disp.o brctl_disp.c
diff -uNr bridge.org/libbridge/Makefile bridge/libbridge/Makefile
--- bridge.org/libbridge/Makefile	Wed Apr  5 00:14:36 2000
+++ bridge/libbridge/Makefile	Thu Sep 21 15:09:43 2000
@@ -1,4 +1,4 @@
-CC = gcc -Wall -c -g
+CC = gcc -Wall $(OPT) -c -g
 
 all:			libbridge.a
 
diff -uNr bridge.org/libbridge/libbridge.h bridge/libbridge/libbridge.h
--- bridge.org/libbridge/libbridge.h	Wed Apr  5 00:14:37 2000
+++ bridge/libbridge/libbridge.h	Thu Sep 21 15:21:05 2000
@@ -124,11 +124,14 @@
 int br_set_stp_state(struct bridge *br, int stp_state);
 int br_set_bridge_priority(struct bridge *br, int bridge_priority);
 int br_set_port_priority(struct port *p, int port_priority);
-int br_set_path_cost(struct port *p, int path_cost);
+int br_read_fdb(struct bridge *br, struct fdb_entry *fdbs, int offset, int num);
 int br_read_fdb(struct bridge *br, struct fdb_entry *fdbs, int offset, int num);
 
+#ifndef __GLIBC__
 /* libc5 combatability */
 char *if_indextoname(unsigned int __ifindex, char *__ifname);
 unsigned int if_nametoindex(const char *__ifname);
+
+#endif
 
 #endif
diff -uNr bridge.org/misc/Makefile bridge/misc/Makefile
--- bridge.org/misc/Makefile	Wed Apr  5 00:14:37 2000
+++ bridge/misc/Makefile	Thu Sep 21 15:11:21 2000
@@ -9,7 +9,7 @@
 		rm -f tap
 
 bidi:		bidi.c
-		gcc -Wall -g -o bidi bidi.c
+		gcc -Wall $(OPT) -o bidi bidi.c
 
 tap:		tap.c
-		gcc -Wall -g -o tap tap.c
+		gcc -Wall $(OPT) -o tap tap.c
